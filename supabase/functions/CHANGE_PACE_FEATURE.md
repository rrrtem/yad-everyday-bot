# Функция смены ритма в YAD Everyday Bot

## Описание

Добавлена команда `/change_pace` для переключения между режимами "Каждый день" и "Раз в неделю".

## Команда

### `/change_pace` - Смена ритма участия

- Показывает текущий ритм пользователя
- Предлагает переключиться на альтернативный ритм
- Кнопка без эмодзи и с коротким текстом

## Логика работы

### При вызове команды
1. Проверяется активность пользователя (в чате или имеет подписку)
2. Определяется текущий ритм (по умолчанию "daily")
3. Показывается сообщение с объяснением и кнопкой переключения

### При нажатии кнопки
1. Обновляется поле `pace` в БД
2. Устанавливается `pace_changed_at` - время изменения
3. Показывается подтверждение с кнопкой обратного переключения

### Варианты ритма
- **daily** - Каждый день
- **weekly** - Раз в неделю

## Сообщения пользователю

### Для режима "Каждый день"
```
Челлендж заточен на регулярность, но мы понимаем, что иногда важно менять свой ритм.

Сейчас ты участвуешь в режиме "Каждый день". Можешь переключиться на режим, в котором мы будем ждать твоих обновлений раз в неделю.

[Кнопка: "Раз в неделю"]
```

### При переключении на "Раз в неделю"
```
Супер! Теперь твой ритм изменился на "Раз в неделю".

Мы будем ждать твои посты раз в неделю.

[Кнопка: "Каждый день"]
```

### Для режима "Раз в неделю"
```
Челлендж заточен на регулярность, но мы понимаем, что иногда важно менять свой ритм.

Сейчас ты участвуешь в режиме "Раз в неделю". Можешь вернуться к ежедневному ритму.

[Кнопка: "Каждый день"]
```

### При переключении на "Каждый день"
```
Супер! Теперь твой ритм изменился на "Каждый день".

Мы будем ждать твои посты ежедневно.

[Кнопка: "Раз в неделю"]
```

## Технические детали

### Новые константы
- `MSG_CHANGE_PACE_CURRENT_DAILY`
- `MSG_CHANGE_PACE_CURRENT_WEEKLY`
- `MSG_CHANGE_PACE_SUCCESS_TO_DAILY`
- `MSG_CHANGE_PACE_SUCCESS_TO_WEEKLY`
- `MSG_CHANGE_PACE_NOT_ACTIVE`
- `CALLBACK_CHANGE_PACE_DAILY`
- `CALLBACK_CHANGE_PACE_WEEKLY`

### Файлы
- **changePaceHandler.ts** - основная логика обработки
- **constants.ts** - сообщения и callback data
- **index.ts** - роутинг команды и callback queries
- **commandHandler.ts** - экспорт функции

### Обновление БД
При смене ритма обновляются поля:
- `pace` - новый ритм ('daily' или 'weekly')
- `pace_changed_at` - время изменения
- `updated_at` - время последнего обновления

### Интеграция
Команда интегрирована в общую систему обработки:
- Роутинг в `index.ts`
- Проверка активности пользователя
- Fallback без кнопок при ошибках API
- Логирование всех действий

## Ограничения
- Команда доступна только активным участникам
- Требует наличие подписки или нахождение в чате
- Кнопки без эмодзи (по требованию)
- Короткие тексты на кнопках

Функция делает участие в челлендже более гибким, позволяя пользователям адаптировать ритм под свои возможности. 