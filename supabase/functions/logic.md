# YAD Everyday Bot Logic

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- **–£–¥–∞–ª–µ–Ω —Ä–µ–∂–∏–º "image"** –∏–∑ –≤—Å–µ—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ —Ä–µ–∂–∏–º "text"** –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - constants.ts ‚Äî —É–¥–∞–ª–µ–Ω—ã AVAILABLE_MODES.IMAGE, PUBLIC_REMINDER_THREAD_ID_IMAGE
  - changeModeHandler.ts ‚Äî —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–º–µ–Ω—ã —Ä–µ–∂–∏–º–∞
  - SetupProcess.ts ‚Äî —É–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫
  - statusCallbackHandlers.ts ‚Äî —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ –∏ —Ä–∏—Ç–º–∞
  - ReportGenerator.ts ‚Äî —É–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ —Ä–µ–∂–∏–º–∞–º
  - statusMessageGenerator.ts ‚Äî —É–ø—Ä–æ—â–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
  - –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã –±–µ–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–∞—Ä—Ç–∏–Ω–æ–∫
- **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî logic.md, README —Ñ–∞–π–ª—ã

### –í—Ç–æ—Ä–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- **–î–æ–±–∞–≤–ª–µ–Ω –º–∞—Å—Å–∏–≤ ADMIN_TELEGRAM_IDS** –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ OWNER_TELEGRAM_ID
- **–°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è isAdmin()** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∞–≤
- **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º:
  - AdminReporter.ts ‚Äî –æ—Ç—á–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º
  - SlotManager.ts ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–ª–æ—Ç–æ–≤
  - tributeApiHandler.ts ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ webhook'–∞—Ö
  - index.ts ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
  - commandHandler.ts ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚Äî OWNER_TELEGRAM_ID = ADMIN_TELEGRAM_IDS[0]

**–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:** –ó–∞–º–µ–Ω–∏—Ç–µ `123456789` –≤ `ADMIN_TELEGRAM_IDS` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Telegram ID –≤—Ç–æ—Ä–æ–≥–æ –∞–¥–º–∏–Ω–∞.

## –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ** –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∫ `in_chat = true`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –≤ —á–∞—Ç–µ (`in_chat = true`)

## –°—Ö–µ–º–∞ –ë–î

–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: `users`

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:
- telegram_id (bigint, primary key) ‚Äî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- first_name, last_name, username (text) ‚Äî –î–∞–Ω–Ω—ã–µ –∏–∑ Telegram
- in_chat (boolean) ‚Äî –§–∏–∑–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —á–∞—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å (true –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ —á–∞—Ç, false –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏)

**–õ–æ–≥–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
- –ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = `in_chat = true`

**–£—Å–ª–æ–≤–∏–µ —É—á–∞—Å—Ç–∏—è –≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ:**
- –§–∏–∑–∏—á–µ—Å–∫–∏ –≤ —á–∞—Ç–µ (in_chat = true) –ò
- –ò–º–µ–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É (subscription_active = true –ò–õ–ò subscription_days_left > 0)

### –ü–æ–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- subscription_active (boolean) ‚Äî –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Tribute API
- subscription_days_left (int) ‚Äî –û—Å—Ç–∞—Ç–æ–∫ –¥–Ω–µ–π –ø–æ–¥–ø–∏—Å–∫–∏ —Å –ø—Ä–æ—à–ª–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞  
- subscription_id (text) ‚Äî ID –ø–æ–¥–ø–∏—Å–∫–∏ –≤ Tribute
- expires_at (timestamp) ‚Äî –ö–æ–≥–¥–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —Ç–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- subscription_started_at, subscription_cancelled_at (timestamp) ‚Äî –î–∞—Ç—ã
- strikes_count (int) ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –ø–æ–¥—Ä—è–¥ (–¥–µ—Ñ–æ–ª—Ç 0)
- post_today (boolean) ‚Äî –û—Ç–ø—Ä–∞–≤–∏–ª –ª–∏ –ø–æ—Å—Ç —Å–µ–≥–æ–¥–Ω—è (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ 04:00 UTC)
- last_post_date (date) ‚Äî –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å—Ç–∞
- units_count (int) ‚Äî –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- consecutive_posts_count (int) ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –ø–æ–¥—Ä—è–¥ –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤ (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç—Ä–∞–π–∫–µ)
- pause_started_at, pause_until, pause_days ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—É–∑–µ
- mode (enum: "text") ‚Äî –†–µ–∂–∏–º —É—á–∞—Å—Ç–∏—è
- pace (enum: "daily", "weekly") ‚Äî –†–∏—Ç–º —É—á–∞—Å—Ç–∏—è
- public_remind (boolean) ‚Äî –ù—É–∂–Ω—ã –ª–∏ –ø—É–±–ª–∏—á–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–¥–µ—Ñ–æ–ª—Ç true)
- payment_link_sent (timestamp) ‚Äî –ö–æ–≥–¥–∞ –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
- promo_code (text) ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
- club (boolean) ‚Äî –°—Ç–∞—Ç—É—Å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∫–ª—É–±–∞ (–≤–ª–∏—è–µ—Ç –Ω–∞ —Ü–µ–Ω—É)
- joined_at, left_at (timestamp) ‚Äî –ö–æ–≥–¥–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è/–ø–æ–∫–∏–Ω—É–ª —á–∞—Ç
- created_at, updated_at, last_activity_at (timestamp) ‚Äî –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

### –ü–æ–ª—è —Å–∏—Å—Ç–µ–º—ã waitlist (–¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ waitlist_migration.sql):
- waitlist (boolean) ‚Äî –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–ø–∏—Å–∫–µ –æ–∂–∏–¥–∞–Ω–∏—è
- waitlist_position (integer) ‚Äî –ü–æ–∑–∏—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –æ—á–µ—Ä–µ–¥–∏ (1, 2, 3...)
- waitlist_added_at (timestamp) ‚Äî –í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è:
- period_id, period, price, amount, currency, subscription_name, tribute_user_id, channel_id, channel_name ‚Äî –î–∞–Ω–Ω—ã–µ –∏–∑ Tribute API
- cancel_reason ‚Äî –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏
- user_state ‚Äî –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- mode_changed_at, pace_changed_at ‚Äî –ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω—è–ª–∏—Å—å —Ä–µ–∂–∏–º –∏ —Ä–∏—Ç–º
- payment_cancel_link_sent ‚Äî –ö–æ–≥–¥–∞ –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ç–º–µ–Ω—É

### –ü–æ–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ message_tracking_migration.sql):
- last_daily_message_id (bigint) ‚Äî ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è MSG_DAILY_ACCEPTED
- last_milestone_message_id (bigint) ‚Äî ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è MSG_DAILY_MILESTONE

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–æ–≤—ã—Ö, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ.

### –¢–∞–±–ª–∏—Ü–∞ slot_settings (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ slots_system_migration.sql):
- id (integer, primary key, default 1) ‚Äî –í—Å–µ–≥–¥–∞ 1 (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å)
- available_slots (integer) ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç (0 = waitlist —Ä–µ–∂–∏–º)
- total_slots_opened (integer) ‚Äî –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–µ—Å—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑
- updated_at (timestamp) ‚Äî –ö–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –æ–±–Ω–æ–≤–ª—è–ª–æ—Å—å
- updated_by (bigint) ‚Äî Telegram ID –∞–¥–º–∏–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –æ–±–Ω–æ–≤–ª—è–ª

## –°–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–ª–æ—Ç–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–ª–æ—Ç—ã. –ö–æ–≥–¥–∞ available_slots = 0, –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ waitlist.

### –§—É–Ω–∫—Ü–∏–∏ PostgreSQL:
- `get_available_slots()` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- `set_available_slots(new_slots, admin_id)` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–æ—Ç–æ–≤
- `decrease_available_slots()` ‚Äî –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ 1 (–ø—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- `increase_available_slots()` ‚Äî –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞ 1 (–ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ –Ω–µ –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞)

### –ö–ª–∞—Å—Å SlotManager:
- `getAvailableSlots()` ‚Äî –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- `setAvailableSlots(slots, adminId)` ‚Äî –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—Ç–æ–≤
- `hasAvailableSlots()` ‚Äî –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç
- `decreaseAvailableSlots()` ‚Äî –ó–∞–Ω–∏–º–∞–µ—Ç —Å–ª–æ—Ç
- `increaseAvailableSlots()` ‚Äî –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Å–ª–æ—Ç
- `getSlotStats()` ‚Äî –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–¥–æ—Å—Ç—É–ø–Ω–æ/–≤—Å–µ–≥–æ)

### –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∞:
- `/open[—á–∏—Å–ª–æ]` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, /open20)
- `/close_slots` ‚Äî –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ (waitlist —Ä–µ–∂–∏–º)
- `/slots` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- `/test_slots` ‚Äî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–ª–æ—Ç–æ–≤

## –õ–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü—Ä–∏ –∫–æ–º–∞–Ω–¥–µ `/start`:
1. –ù–∞—Ö–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (strikes_count = 0, in_chat = false, telegram_id = ...)
3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º –∏–º—è, —Ñ–∞–º–∏–ª–∏—é, username –∏–∑ Telegram
4. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ UserAnalyzer:
   - **new_user** (–Ω–æ–≤—ã–π) ‚Äî –Ω–µ—Ç joined_at –ò–õ–ò user_state is null
   - **active_user** (—É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω) ‚Äî in_chat = true
   - **continue_setup** (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) ‚Äî user_state is not null
   - **returning_user** (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è) ‚Äî joined_at is not null –ò –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
   - **in_waitlist** (–≤ —Å–ø–∏—Å–∫–µ –æ–∂–∏–¥–∞–Ω–∏—è) ‚Äî waitlist = true

### A1. /start ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–®–∞–≥–∏ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ startCommand/index.ts):**
1. **UserAnalyzer** ‚Äî –∞–Ω–∞–ª–∏–∑ —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ UserContext
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—É–±–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî –ø–æ username —á–µ—Ä–µ–∑ club.json
3. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ Flow** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

**Flow NewUserFlow:**
1. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MSG_WELCOME
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã —á–µ—Ä–µ–∑ SlotManager.hasAvailableSlots()
3. –ï—Å–ª–∏ —Å–ª–æ—Ç–æ–≤ –Ω–µ—Ç ‚Üí WaitlistFlow.handle()
4. –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí SetupProcess.startModeSelection()

**Flow ActiveUserFlow:**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MSG_WELCOME_ALREADY_ACTIVE –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

**Flow ReturningUserFlow:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–Ω–∏ (hasSavedDays)
2. –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MSG_WELCOME_RETURNING + PaymentHandler.sendDirectChatLinkWithButton()
3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–æ—Ç—ã –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–ª–∏ waitlist

**Flow ContinueSetupFlow:**
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è user_state (waiting_mode, waiting_promo, payment_link_sent)

**Flow WaitlistFlow:**
1. –î–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏—è —Å –ø–æ–∑–∏—Ü–∏–µ–π
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç user_state = "in_waitlist"
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MSG_WAITLIST —Å –ø–æ–∑–∏—Ü–∏–µ–π –≤ –æ—á–µ—Ä–µ–¥–∏

### –£–ø—Ä–æ—â–µ–Ω–∏—è –≤ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–£–±—Ä–∞–Ω –≤—ã–±–æ—Ä —Ä–∏—Ç–º–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è `daily` –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (–≤ ModeSelectionHandler)
2. **–°–∏—Å—Ç–µ–º–∞ —Å–ª–æ—Ç–æ–≤** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ waitlist –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –º–µ—Å—Ç
3. **–ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—É–±–∞** ‚Äî —Å—Ç–∞—Ç—É—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ username –∏–∑ club.json
4. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ñ–ª–æ—É** ‚Äî —Ä–µ–∂–∏–º ‚Üí –ø—Ä–æ–º–æ–∫–æ–¥ ‚Üí –æ–ø–ª–∞—Ç–∞ (–±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Ä–∏—Ç–º–∞)

### A2. /comeback

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleComebackCommand in commandHandler.ts
1. –ù–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç subscription_days_left > 0
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MSG_WELCOME_RETURNING —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω—è—Ö

### A3. /reset

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleResetCommand in commandHandler.ts
1. –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç user_state = null, mode = null, pace = null
2. –û—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ Map
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MSG_RESET_SUCCESS

### A4. /status

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleStatusCommand in commandHandler.ts
1. –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
2. –§–æ—Ä–º–∏—Ä—É–µ—Ç MSG_CHAT_MEMBER_STATUS —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ sendStatusMessageWithButtons —Å –∫–Ω–æ–ø–∫–∞–º–∏:
   - üí≥ "–ü–æ–¥–ø–∏—Å–∫–∞ –∏ –ø–ª–∞—Ç–µ–∂–∏" ‚Üí TRIBUTE_BOT_LINK
   - üÜò "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" ‚Üí ADMIN_CONTACT

### A5. /get

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleGetCommand in commandHandler.ts
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç ID —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PUBLIC_REMINDER_THREAD_ID

### A6. –ö–æ–º–∞–Ω–¥—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

**A6.1. /change_mode ‚Äî —Å–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞ —É—á–∞—Å—Ç–∏—è**

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleChangeModeCommand in changeModeHandler.ts

**–õ–æ–≥–∏–∫–∞:**
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º (in_chat = true –ò–õ–ò subscription_active = true –ò–õ–ò subscription_days_left > 0)
2. **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤—ã–±–æ—Ä–∞** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç üìù "–¢–µ–∫—Å—Ç—ã" ‚Üí callback_data: "change_mode:text"
   - –ï—Å–ª–∏ —Ä–µ–∂–∏–º —É–∂–µ –≤—ã–±—Ä–∞–Ω ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç MSG_CHANGE_MODE_ALL_SET –±–µ–∑ –∫–Ω–æ–ø–æ–∫
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ callback** ‚Äî handleChangeModeCallback:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –≤—ã–±—Ä–∞–Ω –ª–∏ —É–∂–µ —ç—Ç–æ—Ç —Ä–µ–∂–∏–º
   - –û–±–Ω–æ–≤–ª—è–µ—Ç mode –≤ –ë–î + mode_changed_at
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–ø–∏–∫–µ

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- MSG_CHANGE_MODE_SELECTION ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±–æ—Ä–æ–º —Ä–µ–∂–∏–º–æ–≤
- MSG_CHANGE_MODE_SUCCESS ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–º–µ–Ω—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–ø–∏–∫–µ
- MSG_CHANGE_MODE_SAME ‚Äî –µ—Å–ª–∏ —Ä–µ–∂–∏–º —É–∂–µ –≤—ã–±—Ä–∞–Ω
- MSG_CHANGE_MODE_NOT_ACTIVE ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
- MSG_CHANGE_MODE_ALL_SET ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
- CALLBACK_CHANGE_MODE_TEXT ‚Äî callback data –¥–ª—è –∫–Ω–æ–ø–∫–∏

**–≠—Ç–∞–ª–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- mode: "text" (–∏–∑ AVAILABLE_MODES)
- PUBLIC_REMINDER_THREAD_ID_TEXT ‚Äî ID —Ç–æ–ø–∏–∫–∞ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è):**
- sendModeSelectionMessage —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç currentMode –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∫–Ω–æ–ø–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∂–∏–º—ã, –æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ

## –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –º–µ–Ω—é

### –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** BotMenuManager in utils/botMenuManager.ts

–ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ –º–µ–Ω—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ù–ï –≤ —á–∞—Ç–µ (in_chat = false):
- ‚ù§Ô∏è‚Äçüî• `/start` ‚Äî –ù–∞—á–∞—Ç—å —É—á–∞—Å—Ç–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –í —á–∞—Ç–µ (in_chat = true):
- üëÄ `/status` ‚Äî –ú–æ–π —Å—Ç–∞—Ç—É—Å  
- üåó `/change_mode` ‚Äî –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º
- üí® `/change_pace` ‚Äî –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∏—Ç–º
- üò¥ `/pause` ‚Äî –ö–∞–Ω–∏–∫—É–ª—ã
- üîî/üîï `/reminder` ‚Äî –í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è)
- üí≥ `/tribute` ‚Äî –ü–æ–¥–ø–∏—Å–∫–∞

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π:
- **–ï—Å–ª–∏ public_remind = true:** üîï "–í—ã–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è"
- **–ï—Å–ª–∏ public_remind = false:** üîî "–í–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è"

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–º–∞–Ω–¥ –º–µ–Ω—é:
**–í constants.ts:**
- MENU_CMD_START ‚Äî –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- MENU_CMD_STATUS, MENU_CMD_CHANGE_MODE, MENU_CMD_CHANGE_PACE, MENU_CMD_PAUSE, MENU_CMD_TRIBUTE ‚Äî –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- MENU_CMD_REMINDER_ENABLE, MENU_CMD_REMINDER_DISABLE ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- MENU_CMD_REMINDER_GENERIC ‚Äî fallback –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

### –ú–µ—Ç–æ–¥—ã BotMenuManager:
- `updateUserMenu(telegramId)` ‚Äî –û–±–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `generateCommandsForUser(user)` ‚Äî –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `setUserCommands(telegramId, commands)` ‚Äî –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ Telegram API
- `setDefaultCommands()` ‚Äî –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (fallback)
- `clearUserCommands(telegramId)` ‚Äî –£–¥–∞–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –¢—Ä–∏–≥–≥–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ–Ω—é:
–ú–µ–Ω—é –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (userHandler.ts)
- –í—Ö–æ–¥/–≤—ã—Ö–æ–¥ –∏–∑ —á–∞—Ç–∞ (userHandler.ts)
- –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ (commandHandler.ts)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (statusCallbackHandlers.ts)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Telegram API:
- **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:** scope = "chat" —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º chat_id
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:** scope = "default" –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (fallback)
- **–û—á–∏—Å—Ç–∫–∞ –∫–æ–º–∞–Ω–¥:** deleteMyCommands –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- –ì–æ—Ç–æ–≤–∞ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤ –≤ –±—É–¥—É—â–µ–º

**–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:**
- `/change_pace` ‚Äî –¥–ª—è —Å–º–µ–Ω—ã —Ä–∏—Ç–º–∞ (—É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ MSG_WELCOME_ALREADY_ACTIVE, MSG_STRIKE_FOURTH)

## –õ–æ–≥–∏–∫–∞ Tribute API

### –ë6. Webhook –Ω–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ (new_subscription)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleNewSubscription in tributeApiHandler.ts

1. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ isWebhookAlreadyProcessed (–ø–æ telegram_user_id –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å)
2. **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –Ω–∞—Ö–æ–¥–∏–º –ø–æ telegram_user_id, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω–µ–π** ‚Äî –µ—Å–ª–∏ subscription_days_left > 0, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –∫ expires_at
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Äî subscription_active = true, expires_at (—Å —É—á—ë—Ç–æ–º –±–æ–Ω—É—Å–∞), –æ–±–Ω—É–ª—è–µ–º subscription_days_left
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî MSG_SUBSCRIPTION_RENEWED –∏–ª–∏ MSG_SUBSCRIPTION_RENEWED_WITH_BONUS

### –ë7. Webhook –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ (cancelled_subscription)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleCancelledSubscription in tributeApiHandler.ts

1. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ë6
2. **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –Ω–∞—Ö–æ–¥–∏–º –ø–æ telegram_user_id, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —Å–æ–∑–¥–∞—ë–º
3. **–†–∞—Å—á—ë—Ç –æ—Å—Ç–∞—Ç–∫–∞** ‚Äî —Å—á–∏—Ç–∞–µ–º –¥–Ω–∏ –º–µ–∂–¥—É —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π –∏ expires_at
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Äî subscription_active = false, subscription_days_left = –æ—Å—Ç–∞—Ç–æ–∫
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** ‚Äî MSG_SUBSCRIPTION_CANCELLED —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ—Å—Ç–∞—Ç–∫–µ

–ü–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —á–∞—Ç–µ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞.

## –õ–æ–≥–∏–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –ë1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å—Ç–∞ —Å #daily (dailyPostHandler)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleDailyPost in dailyPostHandler.ts

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å #daily –ø—Ä–∏—à–ª–æ –≤ –ª–∏—á–∫—É ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_DAILY_TO_GROUPCHAT
- –ï—Å–ª–∏ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ—Å—Ç

**–î–µ—Ç–∞–ª–∏:**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ë–î ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –∏ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç
- **–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º units_count –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—Ä–∏–Ω—è—Ç–æ–º –ø–æ—Å—Ç–µ —Å #daily** (–≤—Å–µ–≥–¥–∞)
- –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç –∑–∞ –¥–µ–Ω—å (post_today = false):
  - post_today = true, strikes_count = 0
  - **–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º consecutive_posts_count –Ω–∞ 1** (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –ø–æ–¥—Ä—è–¥ –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤)
  - –ï—Å–ª–∏ –±—ã–ª –Ω–∞ –ø–∞—É–∑–µ ‚Äî —Å–Ω–∏–º–∞–µ–º —Å –ø–∞—É–∑—ã, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_PAUSE_REMOVED_BY_POST
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_DAILY_ACCEPTED(units_count, consecutive_posts_count) **—Å –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ**
  - **–ï—Å–ª–∏ units_count –∫—Ä–∞—Ç–Ω–æ 10 ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_DAILY_MILESTONE(units_count)** **—Å –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ**
- –ï—Å–ª–∏ —É–∂–µ –±—ã–ª –ø–æ—Å—Ç —Å–µ–≥–æ–¥–Ω—è (post_today = true) ‚Äî —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ–º units_count –∏ last_post_date –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ù–æ–≤—ã–µ –ø–æ–ª—è –ë–î:**
- **consecutive_posts_count** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –ø–æ–¥—Ä—è–¥ –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤ (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç—Ä–∞–π–∫–µ –∏–ª–∏ –≤—Ö–æ–¥–µ –≤ —á–∞—Ç)

**–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:**
- –°–æ–æ–±—â–µ–Ω–∏—è MSG_DAILY_ACCEPTED –∏ MSG_DAILY_MILESTONE –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞
- ID —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–æ–ª—è—Ö last_daily_message_id –∏ last_milestone_message_id
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ë2. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π cron –≤ 04:00 UTC (dailyCron)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** DailyCronFlow in cronHandler/flows/DailyCronFlow.ts
**–û–±—Ä–∞–±–æ—Ç–∫–∞:** UserProcessor in cronHandler/helpers/UserProcessor.ts

**–§–∞–∑—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º —Ä–∏—Ç–º–æ–º (—Å—Ç—Ä–∞–π–∫–∏)**
   - –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å in_chat = true –∏ pace = "daily"
   - –ï—Å–ª–∏ post_today = false (–Ω–µ –ø—Ä–∏—Å–ª–∞–ª –ø–æ—Å—Ç) –∏ –ù–ï –Ω–∞ –ø–∞—É–∑–µ ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º strikes_count –Ω–∞ 1
   - **–°–±—Ä–∞—Å—ã–≤–∞–µ–º consecutive_posts_count = 0** (–ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è —Å–µ—Ä–∏—è –ø–æ—Å—Ç–æ–≤)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç—Ä–∞–π–∫–∞—Ö (MSG_STRIKE_FIRST/SECOND/THIRD/FOURTH)
   - –ü—Ä–∏ 4-–º —Å—Ç—Ä–∞–π–∫–µ ‚Üí —Å—Ç–∞–≤–∏–º –Ω–∞ –ø–∞—É–∑—É (pause_until = now + 7 –¥–Ω–µ–π)

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –ø–∞—É–∑–µ**
   - –ï—Å–ª–∏ pause_until <= now() –∏ strikes_count = 4 (–Ω–µ –±—ã–ª–æ –ø–æ—Å—Ç–æ–≤) ‚Üí —É–¥–∞–ª—è–µ–º –∏–∑ —á–∞—Ç–∞ –ë–ï–ó –ë–ê–ù–ê, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_PAUSE_EXPIRED_REMOVED
   - –ï—Å–ª–∏ pause_until <= now() –∏ strikes_count < 4 (–±—ã–ª –ø–æ—Å—Ç) ‚Üí —Å–Ω–∏–º–∞–µ–º —Å –ø–∞—É–∑—ã

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (subscription_days_left)**
   - –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å subscription_days_left > 0, in_chat = true, subscription_active = false
   - –£–º–µ–Ω—å—à–∞–µ–º subscription_days_left –Ω–∞ 1
   - –ó–∞ 3 –¥–Ω—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_SUBSCRIPTION_ENDING_REMINDER
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 0 ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

4. **–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Å—Ç–µ–∫—à–µ–π –ø–æ–¥–ø–∏—Å–∫–æ–π**
   - –£–¥–∞–ª—è–µ–º –∏–∑ —á–∞—Ç–∞ –ë–ï–ó –ë–ê–ù–ê (ban + unban)
   - in_chat = false
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_REMOVED_SUBSCRIPTION_EXPIRED

5. **–°–±—Ä–æ—Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤**
   - post_today = false –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

6. **–ê–Ω–∞–ª–∏–∑ –æ–ø–∞—Å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å 3 —Å—Ç—Ä–∞–π–∫–∞–º–∏
   - –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ —á–∞—Ç–µ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω–µ–π

7. **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á—ë—Ç–∞ –∞–¥–º–∏–Ω—É**
   - MSG_DAILY_CRON_REPORT —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

### –ë3. –ü—É–±–ª–∏—á–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ 20:00 UTC (publicDeadlineReminder)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** PublicReminderFlow in cronHandler/flows/PublicReminderFlow.ts

**–õ–æ–≥–∏–∫–∞:**
1. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: in_chat = true, pace = "daily", –ù–ï –Ω–∞ –ø–∞—É–∑–µ, public_remind = true, –ù–ï –ø—Ä–∏—Å–ª–∞–ª–∏ –ø–æ—Å—Ç —Å–µ–≥–æ–¥–Ω—è, username != null
2. –°–æ–∑–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–≥–∞–º–∏ –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: "@nickname1 @nickname2 @nickname3 –ñ–¥–µ–º –≤–∞—à —Ç–µ–∫—Å—Ç!"
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —Ç—Ä–µ–¥ PUBLIC_REMINDER_THREAD_ID_TEXT

### –ë4. allInfo - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –¥–ª—è –∞–¥–º–∏–Ω–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** AllInfoFlow in cronHandler/flows/AllInfoFlow.ts

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ—Ç –∂–µ MSG_DAILY_CRON_REPORT —á—Ç–æ –∏ dailyCron, –Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î.

## –õ–æ–≥–∏–∫–∞ —É—á–∞—Å—Ç–∏—è –≤ —á–∞—Ç–µ

### –ë5. –ù–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —á–∞—Ç–∞ (handleNewChatMember)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleNewChatMember in newChatMemberHandler.ts

**–®–∞–≥–∏:**
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –Ω–∞—Ö–æ–¥–∏–º –≤ –ë–î, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º —á–µ—Ä–µ–∑ registerUser
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî in_chat = true, joined_at = now(), strikes_count = 0
3. **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤** ‚Äî –≤—ã–∑—ã–≤–∞–µ–º SlotManager.decreaseAvailableSlots()
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî MSG_CHAT_MEMBER_STATUS —Å –∫–Ω–æ–ø–∫–∞–º–∏

**–í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–Ω–∏ –ù–ï –æ–±–Ω—É–ª—è—é—Ç—Å—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —á–∞—Ç (–±—ã–ª–∞ –æ—à–∏–±–∫–∞ –≤ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏).

### –ë6. –£—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–∫–∏–Ω—É–ª —á–∞—Ç (handleLeftChatMember)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleLeftChatMember in leftChatMemberHandler.ts

**–®–∞–≥–∏:**
1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî in_chat = false, left_at = now()
2. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤** ‚Äî –≤—ã–∑—ã–≤–∞–µ–º SlotManager.increaseAvailableSlots()
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏** ‚Äî –µ—Å–ª–∏ expires_at > now(), —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º subscription_days_left
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî MSG_LEFT_CHAT –∏–ª–∏ MSG_LEFT_CHAT_DAYS_SAVED

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã:
- `/start` ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (A1)
- `/comeback` ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –¥–Ω—è–º–∏ (A2)
- `/reset` ‚Äî –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ (A3)
- `/status` ‚Äî –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ (A4)
- `/get` ‚Äî ID —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞ (A5)

### –ö–æ–º–∞–Ω–¥—ã –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–æ—Ç–∞:

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
- `/daily` ‚Äî –ó–∞–ø—É—Å–∫ dailyCron –≤—Ä—É—á–Ω—É—é
- `/remind` ‚Äî –ó–∞–ø—É—Å–∫ publicDeadlineReminder –≤—Ä—É—á–Ω—É—é
- `/allinfo` ‚Äî –ó–∞–ø—É—Å–∫ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
- `/get` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ ID —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞ (–¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–µ–¥–æ–≤)
- `/update_menu` ‚Äî –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –º–µ–Ω—é

**Tribute API –∫–æ–º–∞–Ω–¥—ã:**
- `/tribute_test` ‚Äî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Tribute webhook'–æ–≤
- `/sync_subscriptions` ‚Äî –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–æ–∫
- `/test_webhook [—Ç–∏–ø] [telegram_id]` ‚Äî –°–∏–º—É–ª—è—Ü–∏—è webhook'–∞

**–ö–æ–º–∞–Ω–¥—ã —Å–∏—Å—Ç–µ–º—ã —Å–ª–æ—Ç–æ–≤:**
- `/open[—á–∏—Å–ª–æ]` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, /open20)
- `/close_slots` ‚Äî –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ (waitlist —Ä–µ–∂–∏–º)
- `/slots` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–ª–æ—Ç–æ–≤
- `/test_slots` ‚Äî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–ª–æ—Ç–æ–≤

**–ö–æ–º–∞–Ω–¥—ã –º–∞—Å—Å–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:**
- `/broadcast_chat [—Å–æ–æ–±—â–µ–Ω–∏–µ]` ‚Äî –†–∞—Å—Å—ã–ª–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –í —á–∞—Ç–µ
- `/broadcast_nochat [—Å–æ–æ–±—â–µ–Ω–∏–µ]` ‚Äî –†–∞—Å—Å—ã–ª–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ù–ï –≤ —á–∞—Ç–µ
- `/mass_status` ‚Äî –ú–∞—Å—Å–æ–≤—ã–π –≤—ã–∑–æ–≤ /status —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Ç–µ

**–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
- `/force_update_commands` ‚Äî –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** —Å–º. `docs/ADMIN_COMMANDS.md` –∏ `constants.ts` (ADMIN_COMMANDS)

### –ö–æ–º–∞–Ω–¥—ã –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–´:
- `/change_mode` ‚Äî –°–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞ —É—á–∞—Å—Ç–∏—è
- `/change_pace` ‚Äî –°–º–µ–Ω–∞ —Ä–∏—Ç–º–∞ —É—á–∞—Å—Ç–∏—è

## –û–±—Ä–∞–±–æ—Ç–∫–∞ callback –∫–Ω–æ–ø–æ–∫

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleStartCallbackQuery in startCommand/index.ts

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏—è inline –∫–Ω–æ–ø–æ–∫:
- –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (text)
- –ü—Ä–æ–º–æ–∫–æ–¥—ã (no_promo/have_promo)
- –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (tribute_bot/admin_contact)

## –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** handleTextMessage in commandHandler.ts

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–º–æ–∫–æ–¥—ã –∫–æ–≥–¥–∞ user_state = "waiting_promo".

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã:**
- **ADMIN_TELEGRAM_IDS = [149365895, 123456789]** ‚Äî –º–∞—Å—Å–∏–≤ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –±–æ—Ç–∞
- **isAdmin(telegramId)** ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **AUTO_PAUSE_DAYS = 7** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø–∞—É–∑—ã –ø—Ä–∏ 4-–º —Å—Ç—Ä–∞–π–∫–µ
- **SUBSCRIPTION_REMINDER_DAYS = 3** ‚Äî –∑–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- **WEBHOOK_DEDUPLICATION_HOURS = 1** ‚Äî –≤—Ä–µ–º—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ webhook'–æ–≤

**ID –∏ —Å—Å—ã–ª–∫–∏:**
- **PUBLIC_REMINDER_THREAD_ID_TEXT = 2** ‚Äî ID —Ç–æ–ø–∏–∫–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏–∫–æ–≤

- **ADMIN_TELEGRAM_IDS = [149365895, 123456789]** ‚Äî ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –±–æ—Ç–∞ –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤ (–∑–∞–º–µ–Ω–∏—Ç–µ 123456789 –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –≤—Ç–æ—Ä–æ–≥–æ –∞–¥–º–∏–Ω–∞)
- **CHALLENGE_JOIN_LINK** ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
- **DEFAULT_PAYMENT_URL** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
- **SPECIAL_PAYMENT_URL** ‚Äî –∫–ª—É–±–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
- **TRIBUTE_BOT_LINK** ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ Tribute –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–æ–π
- **ADMIN_CONTACT = "@rrrtem"** ‚Äî –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–†–µ–∂–∏–º—ã –∏ —Ä–∏—Ç–º—ã:**
- **AVAILABLE_MODES** ‚Äî { TEXT: "text" }
- **AVAILABLE_PACES** ‚Äî { DAILY: "daily", WEEKLY: "weekly" }

**–ü—Ä–æ–º–æ–∫–æ–¥—ã:**
- **VALID_PROMO_CODES = ["YASSS", "FREE10"]**
- **PROMO_TYPES** ‚Äî YASSS (–∫–ª—É–±–Ω–∞—è —Å–∫–∏–¥–∫–∞), FREE10 (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–Ω–∏)
- **FREE_PROMO_DAYS = 10** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è FREE10

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã:**
- **TELEGRAM_BOT_TOKEN** ‚Äî —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- **TELEGRAM_GROUP_CHAT_ID** ‚Äî ID –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- **TRIBUTE_API_KEY** ‚Äî –∫–ª—é—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ webhook'–æ–≤ Tribute

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ cronHandler

–ú–æ–¥—É–ª—å —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

**flows/** ‚Äî –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏:
- DailyCronFlow.ts ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- PublicReminderFlow.ts ‚Äî –ø—É–±–ª–∏—á–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è  
- AllInfoFlow.ts ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç

**helpers/** ‚Äî –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã:
- UserProcessor.ts ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ReportGenerator.ts ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- ChatManager.ts ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —á–∞—Ç–æ–º

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ startCommand

–ú–æ–¥—É–ª—å —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

**flows/** ‚Äî –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏:
- NewUserFlow.ts ‚Äî –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ActiveUserFlow.ts ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ReturningUserFlow.ts ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ContinueSetupFlow.ts ‚Äî –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- WaitlistFlow.ts ‚Äî —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏—è
- SlotManager.ts ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–∞–º–∏

**states/** ‚Äî –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π:
- SetupProcess.ts ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ModeSelectionHandler.ts ‚Äî –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
- PromoCodeHandler.ts ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- PaymentHandler.ts ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π

**UserAnalyzer.ts** ‚Äî –∞–Ω–∞–ª–∏–∑ —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ TODO

1. **–ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
   - `/change_mode` ‚Äî —Å–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞ —É—á–∞—Å—Ç–∏—è
   - `/change_pace` ‚Äî —Å–º–µ–Ω–∞ —Ä–∏—Ç–º–∞ —É—á–∞—Å—Ç–∏—è

2. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π —Ä–∏—Ç–º:**
   - –í –ë–î –µ—Å—Ç—å –ø–æ–ª–µ pace = "weekly", –Ω–æ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
   - –í publicDeadlineReminder –µ—Å—Ç—å –∑–∞–≥–æ—Ç–æ–≤–∫–∞, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **RLS –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω RLS –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã users (—Å–º. RLS/rls_setup.sql)
   - Service Role –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
   - Anon —Ä–æ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

4. **–°–∏—Å—Ç–µ–º–∞ —Å–ª–æ—Ç–æ–≤:**
   - –¢—Ä–µ–±—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –º–∏–≥—Ä–∞—Ü–∏–∏ slots_system_migration.sql
   - Fallback –Ω–∞ 0 —Å–ª–æ—Ç–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ë–î

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (statusMessageGenerator.ts)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å–µ–Ω–Ω—ã–π –∏–∑ constants.ts –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- –ö–æ–º–∞–Ω–¥–∞ `/status` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —á–∞—Ç ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–µ–∫—É—â–µ–º —Å—Ç–∞—Ç—É—Å–µ
- –í–µ–∑–¥–µ, –≥–¥–µ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—á–∞—Å—Ç–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:** `generateUserStatusMessage(user: UserStatusData): string`

**–¢–∏–ø—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–¥–ø–∏—Å–∫–∏ (SubscriptionStatus enum):**
- `NOT_IN_CHAT` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ —á–∞—Ç–µ
- `USING_SAVED_DAYS` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–Ω–∏ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏  
- `ACTIVE_SUBSCRIPTION` ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω–µ–π
- `MIXED_STATUS` ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ + —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–Ω–∏
- `UNCLEAR_STATUS` ‚Äî –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:**
1. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ** ‚Äî —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
2. **–†–µ–∂–∏–º –∏ —Ä–∏—Ç–º —É—á–∞—Å—Ç–∏—è** ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤, —Å—Ç—Ä–∞–π–∫–∏, –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ—Å—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
- `determineSubscriptionStatus()` ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- `formatSubscriptionInfo()` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–ø–∏—Å–∫–µ
- `formatParticipationInfo()` ‚Äî —Ä–µ–∂–∏–º –∏ —Ä–∏—Ç–º —É—á–∞—Å—Ç–∏—è
- `formatActivityStats()` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å—Ç–æ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)

**–≠—Ç–∞–ª–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `UserStatusData` interface ‚Äî —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –§–æ—Ä–º–∞—Ç—ã –¥–∞—Ç: `toLocaleDateString('ru-RU')` ‚Äî —Ä—É—Å—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `pluralizeDays()` –∏–∑ constants.ts –¥–ª—è —Å–∫–ª–æ–Ω–µ–Ω–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤—ã–Ω–µ—Å–µ–Ω–∏—è:**
- –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- –¢–∏–ø–∏–∑–∞—Ü–∏—è ‚Äî —Å—Ç—Ä–æ–≥–∏–µ —Ç–∏–ø—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å ‚Äî —Ä–∞–∑–±–∏–µ–Ω–∏–µ –±–æ–ª—å—à–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Äî –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

**–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (generateStatusKeyboard):**

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

**–†—è–¥ 1** (–≤—Å–µ–≥–¥–∞): –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π + –ü–æ–¥–¥–µ—Ä–∂–∫–∞
- "üí≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π" ‚Üí TRIBUTE_BOT_LINK  
- "üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞" ‚Üí ADMIN_CONTACT

**–†—è–¥ 2** (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö): –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ + —Ä–∏—Ç–º–∞  
- "üé® –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º" ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /change_mode
- "‚è∞ –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∏—Ç–º" ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /change_pace

**–†—è–¥ 3** (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö): –ö–∞–Ω–∏–∫—É–ª—ã + –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- "üèñÔ∏è –ö–∞–Ω–∏–∫—É–ª—ã" ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /pause
- "üîî –í–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è" / "üîï –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è" ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É public_remind (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç)

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ callback'–æ–≤ (statusCallbackHandlers.ts):**
- `handleChangeModeCallbackQuery` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç /change_mode –∫–æ–º–∞–Ω–¥—É
- `handleChangePaceCallbackQuery` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç /change_pace –∫–æ–º–∞–Ω–¥—É  
- `handlePauseCallbackQuery` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç /pause –∫–æ–º–∞–Ω–¥—É
- `handleChooseModeCallbackQuery` ‚Äî –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `handleChoosePaceCallbackQuery` ‚Äî –≤—ã–±–æ—Ä —Ä–∏—Ç–º–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã callback'–æ–≤:**
- CALLBACK_CHANGE_MODE, CALLBACK_CHANGE_PACE ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- CALLBACK_TOGGLE_PUBLIC_REMINDER ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–Ω–æ–≤—ã–π)
- CALLBACK_CHANGE_PUBLIC_REMINDER ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (—Å—Ç–∞—Ä—ã–π, deprecated)
- CALLBACK_PAUSE ‚Äî –∫–∞–Ω–∏–∫—É–ª—ã
- CALLBACK_CHOOSE_MODE, CALLBACK_CHOOSE_PACE ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –≤—ã–±–æ—Ä

**–°—Ç–∞—Ç—É—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç:**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–ø–∏—Å–∫–µ –∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω—è—Ö
- –†–µ–∂–∏–º –∏ —Ä–∏—Ç–º —É—á–∞—Å—Ç–∏—è
- **–°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏—á–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** (–≤–∫–ª—é—á–µ–Ω—ã/–æ—Ç–∫–ª—é—á–µ–Ω—ã)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ—Å—Ç—ã)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏ (reminderHandler.ts)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å–µ–Ω–Ω—ã–π –∏–∑ commandHandler.ts –∏ statusCallbackHandlers.ts –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω—ã–º–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏.

**–§—É–Ω–∫—Ü–∏–∏:**
- `handleReminderCommand()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /reminder
- `handleToggleReminderCallback()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- `sendReminderToggleMessage()` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π

**–õ–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã /reminder:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω (–≤ —á–∞—Ç–µ –∏–ª–∏ –∏–º–µ–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É)
2. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `public_remind` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`)
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

**–°–æ–æ–±—â–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç:**
- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–≤–∫–ª—é—á–µ–Ω—ã/–æ—Ç–∫–ª—é—á–µ–Ω—ã)
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ
- –ê–¥–∞–ø—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (CALLBACK_TOGGLE_PUBLIC_REMINDER):**
1. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `public_remind`
2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ
3. –û–±–Ω–æ–≤–ª—è–µ—Ç –ë–î
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π
5. –û–±–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—é –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `BotMenuManager.updateUserMenu()`

**–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞:**
- –ï—Å–ª–∏ `public_remind = true`: "üîï –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è"
- –ï—Å–ª–∏ `public_remind = false`: "üîî –í–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è"

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- `CALLBACK_TOGGLE_PUBLIC_REMINDER = "toggle_public_reminder"`
- `MSG_REMINDERS_ENABLED` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏—è
- `MSG_REMINDERS_DISABLED` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –í `index.ts` –¥–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ callback'–∞ `toggle_public_reminder`
- –í `commandHandler.ts` –∫–æ–º–∞–Ω–¥–∞ `/reminder` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –û–±–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

