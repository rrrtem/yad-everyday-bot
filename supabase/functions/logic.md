# YAD Everyday Bot Logic

## –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ** –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∫ `in_chat = true`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –≤ —á–∞—Ç–µ (`in_chat = true`)

## –°—Ö–µ–º–∞ –ë–î

–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: `users`

–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:
- telegram_id (bigint, primary key) ‚Äî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- first_name, last_name, username (text) ‚Äî –î–∞–Ω–Ω—ã–µ –∏–∑ Telegram
- in_chat (boolean) ‚Äî –§–∏–∑–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —á–∞—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å (true –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ —á–∞—Ç, false –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏)

**–õ–æ–≥–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
- –ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = `in_chat = true`

**–£—Å–ª–æ–≤–∏–µ —É—á–∞—Å—Ç–∏—è –≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ:**
- –§–∏–∑–∏—á–µ—Å–∫–∏ –≤ —á–∞—Ç–µ (in_chat = true) –ò
- –ò–º–µ–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É (subscription_active = true –ò–õ–ò subscription_days_left > 0)

–ü–æ–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- subscription_active (boolean) ‚Äî –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Tribute API
- subscription_days_left (int) ‚Äî –û—Å—Ç–∞—Ç–æ–∫ –¥–Ω–µ–π –ø–æ–¥–ø–∏—Å–∫–∏ —Å –ø—Ä–æ—à–ª–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞  
- subscription_id (text) ‚Äî ID –ø–æ–¥–ø–∏—Å–∫–∏ –≤ Tribute
- expires_at (timestamp) ‚Äî –ö–æ–≥–¥–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —Ç–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- subscription_started_at, subscription_cancelled_at (timestamp) ‚Äî –î–∞—Ç—ã
- strikes_count (int) ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –ø–æ–¥—Ä—è–¥ (–¥–µ—Ñ–æ–ª—Ç 0)
- post_today (boolean) ‚Äî –û—Ç–ø—Ä–∞–≤–∏–ª –ª–∏ –ø–æ—Å—Ç —Å–µ–≥–æ–¥–Ω—è (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ 04:00 UTC)
- last_post_date (date) ‚Äî –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å—Ç–∞
- units_count (int) ‚Äî –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- pause_started_at, pause_until, pause_days ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—É–∑–µ
- mode (enum: "text", "image") ‚Äî –†–µ–∂–∏–º —É—á–∞—Å—Ç–∏—è
- pace (enum: "daily", "weekly") ‚Äî –†–∏—Ç–º —É—á–∞—Å—Ç–∏—è
- public_remind (boolean) ‚Äî –ù—É–∂–Ω—ã –ª–∏ –ø—É–±–ª–∏—á–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–¥–µ—Ñ–æ–ª—Ç true)
- payment_link_sent (timestamp) ‚Äî –ö–æ–≥–¥–∞ –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
- promo_code (text) ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
- club (boolean) ‚Äî –°—Ç–∞—Ç—É—Å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∫–ª—É–±–∞ (–≤–ª–∏—è–µ—Ç –Ω–∞ —Ü–µ–Ω—É)
- joined_at, left_at (timestamp) ‚Äî –ö–æ–≥–¥–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è/–ø–æ–∫–∏–Ω—É–ª —á–∞—Ç
- created_at, updated_at, last_activity_at (timestamp) ‚Äî –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è:
- period_id, period, price, amount, currency, subscription_name, tribute_user_id, channel_id, channel_name ‚Äî –î–∞–Ω–Ω—ã–µ –∏–∑ Tribute API
- cancel_reason ‚Äî –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏
- user_state ‚Äî –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –õ–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü—Ä–∏ –∫–æ–º–∞–Ω–¥–µ `/start`:
1. –ù–∞—Ö–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (strikes_count = 0, in_chat = false, telegram_id = ...)
3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º –∏–º—è, —Ñ–∞–º–∏–ª–∏—é, username –∏–∑ Telegram
4. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - **new_user** (–Ω–æ–≤—ã–π) ‚Äî –Ω–µ—Ç joined_at –ò–õ–ò user_state is null
   - **active_user** (—É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω) ‚Äî in_chat = true
   - **continue_setup** (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) ‚Äî user_state is not null
   - **returning_user** (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è) ‚Äî joined_at is not null

### A1. /start ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–®–∞–≥–∏:**
1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –Ω–∞—Ö–æ–¥–∏–º –≤ –ë–î –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–≥–æ (—Å–º. –≤—ã—à–µ)
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** ‚Äî in_chat = true?
3. **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** ‚Äî –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
4. **–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞** ‚Äî —Ä–µ–∂–∏–º —É—á–∞—Å—Ç–∏—è (text/image)  
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∏—Ç–º–∞** ‚Äî daily –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (–≤ –∫–æ–¥–µ: AVAILABLE_PACES.DAILY)
6. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–Ω–∏, —Å—Ç–∞—Ç—É—Å –∫–ª—É–±–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É

*–û–±–Ω–æ–≤–ª—è—é—Ç—Å—è first_name, last_name, username.
* –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω (in_chat = true) ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è MSG_WELCOME_ALREADY_ACTIVE –∏ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.
* –ï—Å–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (user_state != null) ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞ –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å.
* –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –¥–Ω—è–º–∏ ‚Äî –Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç.
* –ï—Å–ª–∏ –Ω–æ–≤—ã–π/–≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è –±–µ–∑ –¥–Ω–µ–π ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

**–î–µ—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

1. **–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞** ‚Üí inline –∫–Ω–æ–ø–∫–∏ "–¢–µ–∫—Å—Ç—ã" / "–ö–∞—Ä—Ç–∏–Ω–∫–∏" ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç ‚Üí mode —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∏—Ç–º–∞** ‚Üí pace = "daily" (–Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ ‚Äî —É–±—Ä–∞–ª–∏ –≤—ã–±–æ—Ä —Ä–∏—Ç–º–∞)
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–ª—É–±–∞** ‚Üí –µ—Å–ª–∏ club = true ‚Üí —Å—Ä–∞–∑—É –∫–ª—É–±–Ω–∞—è —Å—Å—ã–ª–∫–∞
4. **–ü—Ä–æ–º–æ–∫–æ–¥ (–µ—Å–ª–∏ –Ω–µ –∫–ª—É–±)** ‚Üí MSG_PROMO ‚Üí –∫–Ω–æ–ø–∫–∞ "–£ –º–µ–Ω—è –Ω–µ—Ç –ø—Ä–æ–º–æ–∫–æ–¥–∞" –ò–õ–ò –≤–≤–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–º
5. **–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É** ‚Üí –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–ª—É–±–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
6. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ** ‚Üí user_state = null

**–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:** 
* Webhook –æ—Ç Tribute ‚Üí subscription_active = true ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç.
* –ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º (in_chat = false).

**–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ —á–∞—Ç:**
* –í –±–∞–∑–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è in_chat = true.
* –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è MSG_CHAT_MEMBER_STATUS —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ –∏ –∫–Ω–æ–ø–∫–∞–º–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
  - üí≥ "–ü–æ–¥–ø–∏—Å–∫–∞ –∏ –ø–ª–∞—Ç–µ–∂–∏" ‚Üí TRIBUTE_BOT_LINK
  - üÜò "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" ‚Üí ADMIN_CONTACT

### –£–ø—Ä–æ—â–µ–Ω–∏—è –≤ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–£–±—Ä–∞–Ω –≤—ã–±–æ—Ä —Ä–∏—Ç–º–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è `daily` –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤
2. **–û—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ ChangePace** ‚Äî –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∏—Ç–º –ø–æ–∑–∂–µ  
3. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ñ–ª–æ—É** ‚Äî —Ä–µ–∂–∏–º ‚Üí –ø—Ä–æ–º–æ–∫–æ–¥ ‚Üí –æ–ø–ª–∞—Ç–∞ (–±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Ä–∏—Ç–º–∞)

## –õ–æ–≥–∏–∫–∞ Tribute API

### –ë6. Webhook –Ω–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ (new_subscription)

1. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª –ª–∏ webhook —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
2. **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –Ω–∞—Ö–æ–¥–∏–º –ø–æ telegram_user_id, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —Å–æ–∑–¥–∞—ë–º  
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω–µ–π** ‚Äî –µ—Å–ª–∏ subscription_days_left > 0, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –∫ –Ω–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–µ
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Äî subscription_active = true, expires_at, –æ–±–Ω—É–ª—è–µ–º subscription_days_left  
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî MSG_SUBSCRIPTION_RENEWED[_WITH_BONUS]

### –ë7. Webhook –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ (cancelled_subscription)

1. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ë6
2. **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –Ω–∞—Ö–æ–¥–∏–º –ø–æ telegram_user_id  
3. **–†–∞—Å—á—ë—Ç –æ—Å—Ç–∞—Ç–∫–∞** ‚Äî —Å—á–∏—Ç–∞–µ–º –¥–Ω–∏ –º–µ–∂–¥—É —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π –∏ expires_at
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Äî subscription_active = false, subscription_days_left = –æ—Å—Ç–∞—Ç–æ–∫
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** ‚Äî MSG_SUBSCRIPTION_CANCELLED —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ—Å—Ç–∞—Ç–∫–µ

* –ü–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ (—á–µ—Ä–µ–∑ webhook Tribute) ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —á–∞—Ç–µ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
* subscription_active = false, –Ω–æ subscription_days_left —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Å—Ç–∞—Ç–æ–∫ –¥–Ω–µ–π

## –õ–æ–≥–∏–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –ë1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å—Ç–∞ —Å #daily (dailyPostHandler)

**–õ–æ–≥–∏–∫–∞:**
* –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å #daily –ø—Ä–∏—à–ª–æ –≤ –ª–∏—á–∫—É ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.
* –ï—Å–ª–∏ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ—Å—Ç.

**–î–µ—Ç–∞–ª–∏:**
* –ï—Å–ª–∏ in_chat = false (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω):
  - –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
* –ï—Å–ª–∏ in_chat = true (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω):
  - –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º units_count –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—Ä–∏–Ω—è—Ç–æ–º –ø–æ—Å—Ç–µ —Å #daily
  - –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç –∑–∞ –¥–µ–Ω—å (post_today = false) ‚Üí post_today = true, strikes_count = 0, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_DAILY_ACCEPTED
  - –ï—Å–ª–∏ —É–∂–µ –±—ã–ª –ø–æ—Å—Ç —Å–µ–≥–æ–¥–Ω—è (post_today = true) ‚Üí —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ–º units_count –∏ last_post_date

**–°–Ω—è—Ç–∏–µ —Å –ø–∞—É–∑—ã —á–µ—Ä–µ–∑ –ø–æ—Å—Ç:**
* –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –Ω–∞ –ø–∞—É–∑–µ (pause_until > now()) –∏ –ø—Ä–∏—Å–ª–∞–ª –ø–æ—Å—Ç ‚Üí —Å–Ω–∏–º–∞–µ–º —Å –ø–∞—É–∑—ã, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_PAUSE_REMOVED_BY_POST

### –ë2. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π cron –≤ 04:00 UTC (dailyCron)

1. –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å in_chat = true –∏ pace = "daily":
   - –ï—Å–ª–∏ post_today = false (–Ω–µ –ø—Ä–∏—Å–ª–∞–ª –ø–æ—Å—Ç) ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º strikes_count –Ω–∞ 1
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç—Ä–∞–π–∫–∞—Ö (MSG_STRIKE_FIRST, MSG_STRIKE_SECOND, MSG_STRIKE_THIRD, MSG_STRIKE_FOURTH)  
   - –ü—Ä–∏ 4-–º —Å—Ç—Ä–∞–π–∫–µ ‚Üí —Å—Ç–∞–≤–∏–º –Ω–∞ –ø–∞—É–∑—É (pause_until = now + 7 –¥–Ω–µ–π)

2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–∞—É–∑:
   - –ï—Å–ª–∏ pause_until <= now() –∏ strikes_count = 4 (–Ω–µ –±—ã–ª–æ –ø–æ—Å—Ç–æ–≤) ‚Üí —É–¥–∞–ª—è–µ–º –∏–∑ —á–∞—Ç–∞ –ë–ï–ó –ë–ê–ù–ê (ban + unban), –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_PAUSE_EXPIRED_REMOVED
   - –ï—Å–ª–∏ pause_until <= now() –∏ strikes_count < 4 (–±—ã–ª –ø–æ—Å—Ç) ‚Üí —Å–Ω–∏–º–∞–µ–º —Å –ø–∞—É–∑—ã

3. –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å subscription_days_left > 0 –∏ in_chat = true –∏ subscription_active = false:
   - –£–º–µ–Ω—å—à–∞–µ–º subscription_days_left –Ω–∞ 1
   - –ó–∞ 3 –¥–Ω—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_SUBSCRIPTION_ENDING_REMINDER
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 0 ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_SUBSCRIPTION_EXPIRED

4. –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å subscription_days_left > 0 –∏ in_chat = false:
   - –ù–ï —É–º–µ–Ω—å—à–∞–µ–º subscription_days_left (–¥–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)

5. –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å in_chat = true –∏ subscription_days_left = 0 (–ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π):
   - –£–¥–∞–ª—è–µ–º –∏–∑ —á–∞—Ç–∞ –ë–ï–ó –ë–ê–ù–ê (ban + unban ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ —Å—Å—ã–ª–∫–µ)
   - in_chat = false
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º MSG_REMOVED_SUBSCRIPTION_EXPIRED

6. –°–±—Ä–æ—Å —Ñ–ª–∞–≥–æ–≤: post_today = false –¥–ª—è –≤—Å–µ—Ö

7. **–û—Ç—á—ë—Ç –∞–¥–º–∏–Ω—É:** –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ MSG_DAILY_CRON_REPORT

### –ë3. –ü—É–±–ª–∏—á–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ 20:00 UTC (publicDeadlineReminder)

1. –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å in_chat = true –∏ pace = "weekly":
   - –û—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)

2. **–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
   - –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: in_chat = true, pace = "daily", –ù–ï –Ω–∞ –ø–∞—É–∑–µ, public_remind = true, –ù–ï –ø—Ä–∏—Å–ª–∞–ª–∏ –ø–æ—Å—Ç —Å–µ–≥–æ–¥–Ω—è
   - –†–∞–∑–¥–µ–ª—è–µ–º –ø–æ —Ä–µ–∂–∏–º–∞–º: mode = "text" –∏ mode = "image"  
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç—Ä–µ–¥—ã –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞: PUBLIC_REMINDER_THREAD_ID_TEXT –∏ PUBLIC_REMINDER_THREAD_ID_IMAGE
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º MSG_PUBLIC_DEADLINE_REMINDER —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –¥–æ –∫–æ–Ω—Ü–∞ –¥–Ω—è (04:00 UTC —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è)

**–ú–µ—Ö–∞–Ω–∏–∑–º —Ç—Ä–µ–¥–æ–≤:**
- TEXT —É—á–∞—Å—Ç–Ω–∏–∫–∏ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç—Ä–µ–¥ ID = PUBLIC_REMINDER_THREAD_ID_TEXT
- IMAGE —É—á–∞—Å—Ç–Ω–∏–∫–∏ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç—Ä–µ–¥ ID = PUBLIC_REMINDER_THREAD_ID_IMAGE
- –§–æ—Ä–º–∞—Ç: "@username1, @username2 –î–æ –∫–æ–Ω—Ü–∞ –¥–Ω—è –æ—Å—Ç–∞–ª–æ—Å—å X —á–∞—Å–æ–≤!"

## –õ–æ–≥–∏–∫–∞ —É—á–∞—Å—Ç–∏—è –≤ —á–∞—Ç–µ

### –ë4. –ù–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —á–∞—Ç–∞ (handleNewChatMember) 

**–®–∞–≥–∏:**
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –Ω–∞—Ö–æ–¥–∏–º –≤ –ë–î, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî in_chat = true, joined_at = now(), strikes_count = 0
3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏** ‚Äî –µ—Å–ª–∏ subscription_days_left > 0, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º expires_at –∏ –æ–±–Ω—É–ª—è–µ–º subscription_days_left
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî MSG_CHAT_MEMBER_STATUS —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ –∫–Ω–æ–ø–∫–∞–º–∏:
   - üí≥ "–ü–æ–¥–ø–∏—Å–∫–∞ –∏ –ø–ª–∞—Ç–µ–∂–∏" ‚Üí TRIBUTE_BOT_LINK  
   - üÜò "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" ‚Üí ADMIN_CONTACT

**–õ–æ–≥–∏–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:**
- in_chat = true (—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –≤ —á–∞—Ç–µ)
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ª–∏—á–∏—è –ø–æ–¥–ø–∏—Å–∫–∏

### –ë5. –£—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–∫–∏–Ω—É–ª —á–∞—Ç (handleLeftChatMember)

**–®–∞–≥–∏:**
1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî in_chat = false, left_at = now()
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏** ‚Äî –µ—Å–ª–∏ expires_at > now(), —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º subscription_days_left
3. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî MSG_LEFT_CHAT[_DAYS_SAVED] —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω—è—Ö

**–õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–Ω–µ–π:**
- –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å subscription_days_left ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
- –ï—Å–ª–∏ subscription_days_left = 0 –¢–û–õ–¨–ö–û –µ—Å–ª–∏ subscription_days_left = 0 (–µ—Å–ª–∏ –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–Ω–∏, –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º)
- –ï—Å–ª–∏ –µ—Å—Ç—å –¥–µ–π—Å—Ç–≤—É—é—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ (expires_at > now()) ‚Äî —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞—Ç–æ–∫ –¥–Ω–µ–π

**–°–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ:**
4. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –∞–∫—Ç–∏–≤–µ–Ω –≤ —á–∞—Ç–µ (in_chat = true):
   - –ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–Ω–∏ ‚Üí MSG_LEFT_CHAT_DAYS_SAVED
   - –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω–µ–π ‚Üí MSG_LEFT_CHAT
5. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–¥–∞–ª–∏–ª –±–æ—Ç:
   - MSG_PAUSE_EXPIRED_REMOVED (–ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–∞—É–∑—ã)  
   - MSG_REMOVED_SUBSCRIPTION_EXPIRED (–ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏)

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### /start
- –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—Å–º. A1)

### /get  
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç ID —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞ (–¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PUBLIC_REMINDER_THREAD_ID)

### /comeback
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏—Ö—Å—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–Ω—è—Ö

### /status
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (MSG_CHAT_MEMBER_STATUS)
- –í–∫–ª—é—á–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
  - üí≥ "–ü–æ–¥–ø–∏—Å–∫–∞ –∏ –ø–ª–∞—Ç–µ–∂–∏" ‚Üí TRIBUTE_BOT_LINK
  - üÜò "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" ‚Üí ADMIN_CONTACT

### /reset
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: user_state = null, mode = null, pace = null
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–Ω–æ–≤–æ

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **AUTO_PAUSE_DAYS = 7** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø–∞—É–∑—ã –ø—Ä–∏ 4-–º —Å—Ç—Ä–∞–π–∫–µ  
- **SUBSCRIPTION_REMINDER_DAYS = 3** ‚Äî –∑–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- **DURATION_PENALTY_DAYS = 1** ‚Äî —à—Ç—Ä–∞—Ñ –≤ –¥–Ω—è—Ö –∑–∞ –ø—Ä–æ–ø—É—Å–∫ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–µ)
- **RESTORED_LIVES_AFTER_PENALTY = 2** ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–π –ø–æ—Å–ª–µ —à—Ç—Ä–∞—Ñ–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**ID –∏ —Å—Å—ã–ª–∫–∏:**
- **PUBLIC_REMINDER_THREAD_ID_TEXT** ‚Äî ID —Ç–æ–ø–∏–∫–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏–∫–æ–≤
- **PUBLIC_REMINDER_THREAD_ID_IMAGE** ‚Äî ID —Ç–æ–ø–∏–∫–∞ –¥–ª—è –∫–∞—Ä—Ç–∏–Ω—â–∏–∫–æ–≤  
- **OWNER_TELEGRAM_ID** ‚Äî ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–æ—Ç–∞ –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤
- **CHALLENGE_JOIN_LINK** ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
- **DEFAULT_PAYMENT_URL** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
- **SPECIAL_PAYMENT_URL** ‚Äî –∫–ª—É–±–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
- **MAIN_CHAT_ID** ‚Äî ID –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —á–∞—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–†–µ–∂–∏–º—ã –∏ —Ä–∏—Ç–º—ã:**
- **AVAILABLE_MODES** ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã: { TEXT: "text", IMAGE: "image" }
- **AVAILABLE_PACES** ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∏—Ç–º—ã: { DAILY: "daily", WEEKLY: "weekly" }
- **MODE_PACE_CONFIG** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ–∂–∏–º-—Ä–∏—Ç–º (–≤ –±—É–¥—É—â–µ–º –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–º–æ–∫–æ–¥—ã:**
- **VALID_PROMO_CODES** ‚Äî –º–∞—Å—Å–∏–≤ –≤–∞–ª–∏–¥–Ω—ã—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ ["CLUB2024", "RETURN"]

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã:**
- **TELEGRAM_BOT_TOKEN** ‚Äî —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- **TELEGRAM_GROUP_CHAT_ID** ‚Äî ID –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- **TRIBUTE_API_KEY** ‚Äî –∫–ª—é—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ webhook'–æ–≤ Tribute

## –ú–µ—Ç–æ–¥—ã —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–í–ê–ñ–ù–û:** –í—Å–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —á–∞—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ë–ï–ó –ë–ê–ù–ê, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ —á–∞—Ç.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** 
```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: kickChatMember (–±–∞–Ω–∏—Ç –Ω–∞–≤—Å–µ–≥–¥–∞)
await fetch(`${TELEGRAM_API}/kickChatMember`, {...})

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: banChatMember —Å until_date –≤ –ø—Ä–æ—à–ª–æ–º (–º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Ä–∞–∑–±–∞–Ω)
const untilDate = Math.floor(Date.now() / 1000) - 1; // –≤—Ä–µ–º—è –≤ –ø—Ä–æ—à–ª–æ–º
await fetch(`${TELEGRAM_API}/banChatMember`, { 
  until_date: untilDate, 
  revoke_messages: false 
})
```

**–§—É–Ω–∫—Ü–∏—è:** `removeUserFromChatWithoutBan(userId, groupChatId, telegramBotToken)` –≤ `constants.ts`

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏:**
- –ò—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–∞—É–∑—ã —Å 4 —Å—Ç—Ä–∞–π–∫–∞–º–∏
- –ò—Å—Ç–µ—á–µ–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π –ø–æ–¥–ø–∏—Å–∫–∏ –±–µ–∑ –ø—Ä–æ–¥–ª–µ–Ω–∏—è

