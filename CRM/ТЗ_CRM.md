# Техническое задание: CRM-страница пользователей (админка)

## 1. Цель
Создать современную, минималистичную и защищённую веб-страницу для просмотра и фильтрации всех пользователей из базы данных Supabase. Страница предназначена для внутреннего использования (админка), размещается на GitHub Pages в папке `/CRM`.

---

## 2. Технологии
- **Frontend:** React + TypeScript
- **UI:** Radix UI (headless-компоненты) + Tailwind CSS (стилизация)
- **API:** Supabase JS SDK (только чтение, сервисный ключ не хранить в публичном репозитории)
- **Аутентификация:** Простая форма логина/пароля на фронте (localStorage)
- **Деплой:** GitHub Pages (папка `/CRM` в корне)

---

## 3. Функционал

### 3.1. Аутентификация
- Страница логина (логин/пароль)
- После успешного входа — доступ к CRM, иначе редирект на логин
- Токен/флаг авторизации хранится в localStorage

### 3.2. Главная страница
- Список всех пользователей из Supabase
- **Фильтры:**
  - В чате (`in_chat = true`)
  - Был в чате, но вышел (`in_chat = false` и `joined_at IS NOT NULL`)
  - Никогда не был в чате (`joined_at IS NULL`)
  - Поиск по username/ID
- Сортировка по дате регистрации, активности, дням до окончания подписки
- Адаптивность (мобильные/десктоп)

### 3.3. Карточка пользователя (UserCard)
В карточке отображаются ключевые поля:
- Telegram ID (`telegram_id`)
- Имя, фамилия, username (`first_name`, `last_name`, `username`)
- В чате сейчас (`in_chat`)
- Дата входа/выхода из чата (`joined_at`, `left_at`)
- Активна ли подписка (`subscription_active`)
- Осталось дней подписки (`subscription_days_left`)
- Дата окончания подписки (`expires_at`)
- Дата регистрации (`created_at`)
- Количество страйков (`strikes_count`)
- Пост сегодня (`post_today`)
- Последний пост (`last_post_date`)
- Всего постов (`units_count`)
- Пауза (`pause_started_at`, `pause_until`, `pause_days`)
- Режим (`mode`)
- Ритм (`pace`)
- Публичные напоминания (`public_remind`)
- Промокод (`promo_code`)
- Статус клуба (`club`)
- Позиция в waitlist (`waitlist`, `waitlist_position`)
- Последняя активность (`last_activity_at`)

---

## 4. UI/UX
- Современный минималистичный дизайн (Radix UI + Tailwind CSS)
- Чистая типографика, много whitespace, акцент на данные
- Карточки или таблица пользователей
- Фильтры и поиск всегда доступны
- Возможность быстро посмотреть детали пользователя

---

## 5. Безопасность
- Не хранить сервисный ключ Supabase в публичном репозитории!
- Доступ к CRM только после авторизации
- (Опционально) ограничить доступ по IP или через serverless-прокси

---

## 6. Деплой
- Сборка фронта (`npm run build`)
- Деплой в ветку `gh-pages` через GitHub Actions
- Открытие по адресу GitHub Pages (`/CRM`)

---

## 7. Структура проекта (пример)

```
/CRM
  /src
    /components
      - LoginForm.tsx
      - UserCard.tsx
      - Filters.tsx
      - UserList.tsx
    /pages
      - Login.tsx
      - Dashboard.tsx
    /api
      - supabaseClient.ts
      - users.ts
    - App.tsx
    - index.tsx
  - package.json
  - tailwind.config.js
  - postcss.config.js
  - vite.config.ts
  - README.md
```

---

## 8. Примечания
- Все фильтры и поля должны быть легко расширяемы.
- UI должен быть максимально простым для чтения и управления.
- Вся логика фильтрации и отображения — на фронте, данные берём из Supabase. 